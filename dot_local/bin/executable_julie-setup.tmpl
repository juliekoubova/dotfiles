#!/bin/sh
{{ $apk := (or .os.alpine .os.chimera) }}
{{ $args := dict "os" .os "pkgs" .pkgs "virtual_pkgs" .virtual_pkgs }}

{{- if not .os.darwin }}
if [ `id -u` != "0" ]; then
  echo "Need root" >&2
  exit 1
fi
{{ end -}}

{{- if $apk -}}
{{ template "packages_apk" $args }}
{{- else if .os.darwin -}}
{{ template "packages_brew" $args }}
{{- end -}}

{{- if .os.darwin }}
brew install \
  git \
  git-delta \
  eza \
  font-cascadia-code-nf \
  ripgrep \
  fd \
  fzf \
  htop \
  iterm2 \
  jq \
  less \
  neovim \
  rsync \
  starship \
  ;
{{- end }}
